<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Tidymass shiny Toolkits | Tutorials for Tidymass shinyapp</title>
  <meta name="description" content="<p>This is a minimal example of using the bookdown package to write a book.
set in the _output.yml file.
The HTML output format for this example is bookdown::gitbook,</p>" />
  <meta name="generator" content="bookdown 0.42 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Tidymass shiny Toolkits | Tutorials for Tidymass shinyapp" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>This is a minimal example of using the bookdown package to write a book.
set in the _output.yml file.
The HTML output format for this example is bookdown::gitbook,</p>" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Tidymass shiny Toolkits | Tutorials for Tidymass shinyapp" />
  
  <meta name="twitter:description" content="<p>This is a minimal example of using the bookdown package to write a book.
set in the _output.yml file.
The HTML output format for this example is bookdown::gitbook,</p>" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="downstream-data-processing.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Tidymass shinyapp</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Installation</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#install-r-and-rstudio"><i class="fa fa-check"></i><b>1.1</b> Install R and Rstudio</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#for-mac-user-install-cario"><i class="fa fa-check"></i><b>1.2</b> (For Mac User) Install Cario</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#install-tidymass-shinyapp"><i class="fa fa-check"></i><b>1.3</b> Install Tidymass shinyapp</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="upstream-data-processing.html"><a href="upstream-data-processing.html"><i class="fa fa-check"></i><b>2</b> Upstream data processing</a>
<ul>
<li class="chapter" data-level="2.1" data-path="upstream-data-processing.html"><a href="upstream-data-processing.html#data-format-converter"><i class="fa fa-check"></i><b>2.1</b> Data format converter</a></li>
<li class="chapter" data-level="2.2" data-path="upstream-data-processing.html"><a href="upstream-data-processing.html#project-initiate"><i class="fa fa-check"></i><b>2.2</b> Project initiate</a></li>
<li class="chapter" data-level="2.3" data-path="upstream-data-processing.html"><a href="upstream-data-processing.html#data-import"><i class="fa fa-check"></i><b>2.3</b> Data import</a></li>
<li class="chapter" data-level="2.4" data-path="upstream-data-processing.html"><a href="upstream-data-processing.html#data-quality-assessment"><i class="fa fa-check"></i><b>2.4</b> Data quality assessment</a></li>
<li class="chapter" data-level="2.5" data-path="upstream-data-processing.html"><a href="upstream-data-processing.html#data-cleaning"><i class="fa fa-check"></i><b>2.5</b> Data cleaning</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="downstream-data-processing.html"><a href="downstream-data-processing.html"><i class="fa fa-check"></i><b>3</b> Downstream data processing</a>
<ul>
<li class="chapter" data-level="3.1" data-path="downstream-data-processing.html"><a href="downstream-data-processing.html#metabolite-annotation"><i class="fa fa-check"></i><b>3.1</b> Metabolite annotation</a></li>
<li class="chapter" data-level="3.2" data-path="downstream-data-processing.html"><a href="downstream-data-processing.html#annotation-filtering"><i class="fa fa-check"></i><b>3.2</b> Annotation filtering</a></li>
<li class="chapter" data-level="3.3" data-path="downstream-data-processing.html"><a href="downstream-data-processing.html#metabolites-origin"><i class="fa fa-check"></i><b>3.3</b> Metabolites origin</a></li>
<li class="chapter" data-level="3.4" data-path="downstream-data-processing.html"><a href="downstream-data-processing.html#differential-accumulated-metabolites-dam"><i class="fa fa-check"></i><b>3.4</b> Differential Accumulated Metabolites (DAM)</a></li>
<li class="chapter" data-level="3.5" data-path="downstream-data-processing.html"><a href="downstream-data-processing.html#enrichment"><i class="fa fa-check"></i><b>3.5</b> Enrichment</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="tidymass-shiny-toolkits.html"><a href="tidymass-shiny-toolkits.html"><i class="fa fa-check"></i><b>4</b> Tidymass shiny Toolkits</a>
<ul>
<li class="chapter" data-level="4.1" data-path="tidymass-shiny-toolkits.html"><a href="tidymass-shiny-toolkits.html#feature-based-pathway-analysis-fpa"><i class="fa fa-check"></i><b>4.1</b> Feature-based Pathway Analysis (FPA)</a></li>
<li class="chapter" data-level="4.2" data-path="tidymass-shiny-toolkits.html"><a href="tidymass-shiny-toolkits.html#metabolite-database-construction"><i class="fa fa-check"></i><b>4.2</b> Metabolite database construction</a></li>
<li class="chapter" data-level="4.3" data-path="tidymass-shiny-toolkits.html"><a href="tidymass-shiny-toolkits.html#kegg-pathway-database-construction"><i class="fa fa-check"></i><b>4.3</b> KEGG Pathway Database Construction</a></li>
<li class="chapter" data-level="4.4" data-path="tidymass-shiny-toolkits.html"><a href="tidymass-shiny-toolkits.html#metabolite-id-conversion"><i class="fa fa-check"></i><b>4.4</b> Metabolite ID Conversion</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Tutorials for Tidymass shinyapp</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tidymass-shiny-toolkits" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">4</span> Tidymass shiny Toolkits<a href="tidymass-shiny-toolkits.html#tidymass-shiny-toolkits" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="feature-based-pathway-analysis-fpa" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Feature-based Pathway Analysis (FPA)<a href="tidymass-shiny-toolkits.html#feature-based-pathway-analysis-fpa" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The metabolic feature-based functional module analysis approach can significantly expands biological interpretation beyond MS2 spectra-based annotated metabolites. You may refer to <a href="https://www.tidymass.org/docs/" target="_blank">Tidymass Website</a> for detailed documentation.</p>
</div>
<div id="metabolite-database-construction" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Metabolite database construction<a href="tidymass-shiny-toolkits.html#metabolite-database-construction" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>If you have in-house standards which have been acquired with MS2 spectra data, then you can construct the in-house MS2 spectra databases using the <a href="https://metid.tidymass.org/" target="_blank">MetID</a> package.</p>
<p>There are no specific requirements on how to run the LC/MS data for users. As the in-house database construction in metid is used for users to get the in-house databases for themselves (including m/z, retention time and MS/MS spectra of metabolites, for level 1 annotation (Sumner et al., 2007)), so the users just need to run the standards using the same column, LC-gradient, and MS settings with their real samples in the lab</p>
<p><strong>Data preparation</strong></p>
<p>In Tidymass shinyapp, we provide a dedicated module for in-house database construction. To prepare your workflow, please follow the comprehensive step-by-step instructions available at:<br />
<a href="https://metid.tidymass.org/articles/database_construction" target="_blank">https://metid.tidymass.org/articles/database_construction</a></p>
<p><strong>Construct in-house database with MS2 spectra</strong></p>
<ol style="list-style-type: decimal">
<li><strong>Selec input file</strong>
<ul>
<li>Click the File Path button</li>
<li>Select a CSV-formatted file containing metabolite metadata.</li>
</ul></li>
</ol>
<p><img src="figures/1.png" />
2. <strong>Configure Database Parameters</strong>
- Navigate to the <strong>Construction Parameters</strong> tab
- Review and adjust database-specific details
- Click the <strong>Build Database</strong> button to initiate the process</p>
<p><img src="figures/2.png" /></p>
<ol start="3" style="list-style-type: decimal">
<li><strong>Result Verification &amp; Database Export</strong>
<ul>
<li>Spectral information will be displayed in the main interface (verify key metadata like m/z values and retention times)</li>
<li>Assign a unique identifier to your custom database (eg: “demo_inhouse_database”)</li>
<li>Click <strong>Download Database</strong> to save the compiled database to your local system</li>
</ul></li>
</ol>
<p><img src="figures/3.png" /></p>
<ol start="4" style="list-style-type: decimal">
<li><strong>Workflow Execution:</strong>
<ul>
<li>Place the downloaded database file (.rda, R Data format) into a dedicated empty directory</li>
<li>During the <strong>Metabolite Annotation</strong> phase of the workflow:<br />
‣ Click <strong>Choose Folder</strong><br />
‣ Navigate to the directory containing your custom database</li>
<li>Initiate the annotation process by clicking the <strong>Start Annotation</strong> button</li>
</ul></li>
</ol>
<p><img src="figures/4.png" />
<img src="figures/5.png" /></p>
</div>
<div id="kegg-pathway-database-construction" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> KEGG Pathway Database Construction<a href="tidymass-shiny-toolkits.html#kegg-pathway-database-construction" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>When the research subject is not human, constructing a species-specific KEGG pathway database becomes essential for conducting enrichment analysis. The KEGG database contains comprehensive metabolic pathway data for various organisms, including 1,169 eukaryotes, 9,208 bacteria, and 449 archaea (refer to <a href="https://www.genome.jp/kegg/tables/br08606.html" target="_blank">KEGG Organisms List</a>). Researchers should first identify their target species’ organism code (e.g., <code>hsa</code> for <em>Homo sapiens</em>, <code>mmu</code> for <em>Mus musculus</em>, <code>ath</code> for <em>Arabidopsis thaliana</em>) from this resource.</p>
<p>The tidymass shiny provides a dedicated module for constructing species-specific pathway databases using these organism codes. The generated pathway database can subsequently be applied to metabolite KEGG pathway enrichment analysis through either the tidymass shiny interface or tidymass R programming.</p>
<p><strong>Operational Workflow</strong></p>
<ol style="list-style-type: decimal">
<li><p><strong>Directory Preparation</strong></p>
<p>Create a dedicated working directory (e.g., <code>kegg_pathway_db</code>). Navigate to the <code>KEGG Pathway Database Construction</code> tool under the <code>Tidymass Shiny Toolkits</code> dropdown menu in the tidymass shiny interface.</p></li>
<li><p><strong>Workspace Configuration</strong></p>
<ul>
<li>Click <code>Set working directory</code> in the sidebar’s <em>Data Input</em> section</li>
<li>Select the newly created <code>kegg_pathway_db</code> directory
<img src="figures/a1.png" /></li>
</ul></li>
<li><p><strong>Parameter Settings</strong></p>
<p>Under the <em>Parameters</em> section:</p>
<ul>
<li>Enter the target organism code (case-sensitive)</li>
<li>Set sleep time between 1-1.5 seconds (minimum 1s to prevent server overload)</li>
<li>Initiate download by clicking <code>Download pathway</code></li>
</ul></li>
<li><p><strong>Execution Monitoring</strong></p>
<ul>
<li>A progress bar will appear in the lower-right interface</li>
<li>Real-time KEGG pathway data retrieval requires stable internet connectivity</li>
<li>If interruptions occur:
<ul>
<li>Verify network connection</li>
<li>Consider increasing sleep interval
<img src="figures/a2.png" /></li>
</ul></li>
</ul></li>
<li><p><strong>Completion Verification</strong></p>
<p>Upon successful database construction:</p>
<ul>
<li>The main interface displays execution logs</li>
<li>File paths of generated databases are explicitly shown
<img src="figures/a3.png" /></li>
</ul></li>
</ol>
<p>This automated process ensures reproducible creation of organism-specific KEGG pathway resources while maintaining compliance with KEGG server access protocols.</p>
<ol start="6" style="list-style-type: decimal">
<li><strong>Use your pathway database in KEGG enrichment analysis</strong></li>
</ol>
<p>In the annotation results, you will find that Pathway IDs adopt the organism code (e.g., dme) from your custom database as their prefix. This confirms that your provided database was successfully utilized during the KEGG enrichment analysis.</p>
<p><img src="figures/a4.png" /></p>
</div>
<div id="metabolite-id-conversion" class="section level2 hasAnchor" number="4.4">
<h2><span class="header-section-number">4.4</span> Metabolite ID Conversion<a href="tidymass-shiny-toolkits.html#metabolite-id-conversion" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Metabolites often possess distinct identifiers across analytical databases, necessitating cross-platform ID translation. Tidymass Shiny offers integrated solutions for this purpose:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Established Services</strong></p>
<ul>
<li><a href="https://cts.fiehnlab.ucdavis.edu/" target="_blank">CTS - Chemical Translation Service</a> by Fiehn Lab</li>
<li><a href="https://www.chemspider.com/" target="_blank">ChemSpider</a> chemical structure resolver</li>
</ul></li>
<li><p><strong>Experimental AI-Powered Conversion</strong></p>
<ul>
<li>Utilizes OpenAI’s language models (<em>caution: non-finetuned LLMs may generate unreliable outputs; use judiciously</em>)</li>
</ul></li>
</ol>
<p><strong>API Requirements</strong></p>
<ul>
<li>ChemSpider: <a href="https://developer.rsc.org/getting-started" target="_blank">Register API key</a></li>
<li>OpenAI: <a href="https://platform.openai.com/api-keys" target="_blank">Obtain API credentials</a></li>
</ul>
<hr />
<p><strong>Operational Protocol</strong></p>
<p>Step 1: <strong>Platform Selection</strong></p>
<ul>
<li>Under <em>Convert Parameters</em>, choose a translation service</li>
</ul>
<p>Step 2: <strong>Input Configuration</strong></p>
<ol style="list-style-type: decimal">
<li><p><strong>Source Identification</strong></p>
<ul>
<li>Enter query term in <em>Source ID Type</em> (autocompletion suggests compatible databases)</li>
<li>Example: Select <em>Chemical Name</em></li>
</ul></li>
<li><p><strong>Target Specification</strong></p>
<ul>
<li>Choose output format in <em>Target ID Type</em> (e.g., HMDB ID)</li>
</ul></li>
</ol>
<p>Step 3: <strong>Execution</strong></p>
<ul>
<li>Input compound identifiers in <em>Conversion Input</em></li>
<li>Click <code>Convert ID</code></li>
</ul>
<p>Step 4: <strong>Output Retrieval</strong></p>
<ul>
<li>Translated IDs display in tabular/JSON format after computational latency</li>
<li>Failed mappings highlight discrepancies for manual verification</li>
</ul>
<p><img src="figures/convert.gif" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="downstream-data-processing.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": "https://github.com/USERNAME/REPO/edit/BRANCH/03-parts.Rmd",
    "text": "Edit"
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["_main.pdf", "_main.epub"],
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "subsection"
  }
});
});
</script>

</body>

</html>
