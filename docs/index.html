<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Tutorials for Tidymass Shinyapp</title>
  <meta name="description" content="<p>This is a minimal example of using the bookdown package to write a book.
set in the _output.yml file.
The HTML output format for this example is bookdown::gitbook,</p>" />
  <meta name="generator" content="bookdown 0.43 and GitBook 2.6.7" />

  <meta property="og:title" content="Tutorials for Tidymass Shinyapp" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>This is a minimal example of using the bookdown package to write a book.
set in the _output.yml file.
The HTML output format for this example is bookdown::gitbook,</p>" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Tutorials for Tidymass Shinyapp" />
  
  <meta name="twitter:description" content="<p>This is a minimal example of using the bookdown package to write a book.
set in the _output.yml file.
The HTML output format for this example is bookdown::gitbook,</p>" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  

<link rel="next" href="upstream-data-processing.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Tidymass shinyapp</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Installation and access instructions</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#access-the-online-version"><i class="fa fa-check"></i><b>1.1</b> Access the online version</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#install-r-and-rstudio"><i class="fa fa-check"></i><b>1.2</b> Install R and Rstudio</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#for-mac-user-install-cario"><i class="fa fa-check"></i><b>1.3</b> (For Mac User) Install Cario</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#install-tidymass-shinyapp"><i class="fa fa-check"></i><b>1.4</b> Install Tidymass shinyapp</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#install-docker-version"><i class="fa fa-check"></i><b>1.5</b> Install docker version</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#install-server-version"><i class="fa fa-check"></i><b>1.6</b> Install server version</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="upstream-data-processing.html"><a href="upstream-data-processing.html"><i class="fa fa-check"></i><b>2</b> Upstream data processing</a>
<ul>
<li class="chapter" data-level="2.1" data-path="upstream-data-processing.html"><a href="upstream-data-processing.html#data-format-converter"><i class="fa fa-check"></i><b>2.1</b> Data format converter</a></li>
<li class="chapter" data-level="2.2" data-path="upstream-data-processing.html"><a href="upstream-data-processing.html#project-initiate"><i class="fa fa-check"></i><b>2.2</b> Project initiate</a></li>
<li class="chapter" data-level="2.3" data-path="upstream-data-processing.html"><a href="upstream-data-processing.html#data-import-local-version"><i class="fa fa-check"></i><b>2.3</b> Data import (local version)</a></li>
<li class="chapter" data-level="2.4" data-path="upstream-data-processing.html"><a href="upstream-data-processing.html#data-import-online-version"><i class="fa fa-check"></i><b>2.4</b> Data import (online version)</a></li>
<li class="chapter" data-level="2.5" data-path="upstream-data-processing.html"><a href="upstream-data-processing.html#data-quality-assessment"><i class="fa fa-check"></i><b>2.5</b> Data quality assessment</a></li>
<li class="chapter" data-level="2.6" data-path="upstream-data-processing.html"><a href="upstream-data-processing.html#data-cleaning"><i class="fa fa-check"></i><b>2.6</b> Data cleaning</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="downstream-data-processing.html"><a href="downstream-data-processing.html"><i class="fa fa-check"></i><b>3</b> Downstream data processing</a>
<ul>
<li class="chapter" data-level="3.1" data-path="downstream-data-processing.html"><a href="downstream-data-processing.html#metabolite-annotation"><i class="fa fa-check"></i><b>3.1</b> Metabolite annotation</a></li>
<li class="chapter" data-level="3.2" data-path="downstream-data-processing.html"><a href="downstream-data-processing.html#annotation-filtering"><i class="fa fa-check"></i><b>3.2</b> Annotation filtering</a></li>
<li class="chapter" data-level="3.3" data-path="downstream-data-processing.html"><a href="downstream-data-processing.html#metabolites-origin"><i class="fa fa-check"></i><b>3.3</b> Metabolites origin</a></li>
<li class="chapter" data-level="3.4" data-path="downstream-data-processing.html"><a href="downstream-data-processing.html#differential-accumulated-metabolites-dam"><i class="fa fa-check"></i><b>3.4</b> Differential Accumulated Metabolites (DAM)</a></li>
<li class="chapter" data-level="3.5" data-path="downstream-data-processing.html"><a href="downstream-data-processing.html#enrichment"><i class="fa fa-check"></i><b>3.5</b> Enrichment</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="tidymass-shiny-toolkits.html"><a href="tidymass-shiny-toolkits.html"><i class="fa fa-check"></i><b>4</b> Tidymass shiny Toolkits</a>
<ul>
<li class="chapter" data-level="4.1" data-path="tidymass-shiny-toolkits.html"><a href="tidymass-shiny-toolkits.html#feature-based-pathway-analysis-fpa"><i class="fa fa-check"></i><b>4.1</b> Feature-based Pathway Analysis (FPA)</a></li>
<li class="chapter" data-level="4.2" data-path="tidymass-shiny-toolkits.html"><a href="tidymass-shiny-toolkits.html#metabolite-database-construction"><i class="fa fa-check"></i><b>4.2</b> Metabolite database construction</a></li>
<li class="chapter" data-level="4.3" data-path="tidymass-shiny-toolkits.html"><a href="tidymass-shiny-toolkits.html#kegg-pathway-database-construction"><i class="fa fa-check"></i><b>4.3</b> KEGG Pathway Database Construction</a></li>
<li class="chapter" data-level="4.4" data-path="tidymass-shiny-toolkits.html"><a href="tidymass-shiny-toolkits.html#metabolite-id-conversion"><i class="fa fa-check"></i><b>4.4</b> Metabolite ID Conversion</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Tutorials for Tidymass Shinyapp</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="header">
<h1 class="title">Tutorials for Tidymass Shinyapp</h1>
</div>
<div id="installation-and-access-instructions" class="section level1 hasAnchor" number="1">
<h1><span class="header-section-number">1</span> Installation and access instructions<a href="index.html#installation-and-access-instructions" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><a href="https://github.com/tidymass/tidymass_shiny" target="_blank">Tidymass shinyapp</a> is a user-friendly web application for <a href="https://www.tidymass.org/" target="_blank">Tidymass</a> that requires little or no programming experience.</p>
<p>We provided online version so that you can simply access it and analyze your data. If you want to process the data locally, we also provide various download options. To be specific, the app can be installed via code, docker and server, and we will introduce how to do that step by step in this chapter.</p>
<div id="access-the-online-version" class="section level2 hasAnchor" number="1.1">
<h2><span class="header-section-number">1.1</span> Access the online version<a href="index.html#access-the-online-version" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To access the online version of Tidymass shinyapp, you can simply click the link: <a href="https://tidymassshiny.jaspershenlab.com" target="_blank">https://tidymassshiny.jaspershenlab.com</a></p>
<p><img src="figures/online_version.png" /></p>
<p>This online version is hosted on a server, and you can use it to analyze your data without any installation. However, please note that the online version may have some limitations in terms of data size and processing speed. For example, the upload file size is restricted to <strong>512MB</strong>.</p>
<p>Different from the local version, the results of online version will be stored in the server and will be <strong>deleted after 24 hours</strong>. If you want to save the results, please record the JOB ID and download the results by clicking “<strong>Download All Data</strong>”.</p>
<p><img src="figures/job_id.png" /></p>
<p><img src="figures/download_reulst.png" /></p>
</div>
<div id="install-r-and-rstudio" class="section level2 hasAnchor" number="1.2">
<h2><span class="header-section-number">1.2</span> Install R and Rstudio<a href="index.html#install-r-and-rstudio" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>You may choose to use the local version of Tidymass shinyapp, which requires you to install R and Rstudio on your computer. This allows you to analyze larger datasets and have more control over the analysis process.</p>
<p>If you have installed them before, please ensure that R version &gt; 4.1 as tidymass required, ohterwise download and install the <a href="https://cran.r-project.org/mirrors.html" target="_blank">latest version of R</a>.</p>
<p><strong>Install R</strong></p>
<p>Download <a href="https://www.r-project.org/" target="_blank">R</a> and install it.</p>
<p><img src="figures/R_install.png" /></p>
<p><strong>Install Rstudio</strong></p>
<p>Download <a href="https://posit.co/download/rstudio-desktop/#download" target="_blank">Rstudio</a> and install it.</p>
<p><img src="figures/Rstudio_install.png" /></p>
<p><strong>Open the Rstudio</strong></p>
<p><img src="figures/Rstudio.png" /></p>
</div>
<div id="for-mac-user-install-cario" class="section level2 hasAnchor" number="1.3">
<h2><span class="header-section-number">1.3</span> (For Mac User) Install Cario<a href="index.html#for-mac-user-install-cario" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Cairo is a 2D graphics library used by R for high-quality plots and needed for Tidymass Shinyapp. On macOS, it requires the X11 system, which is not installed by default. You can follow the following steps if you haven’t install Cairo.</p>
<p>First, visit the official website of <a href="https://www.xquartz.org/" target="_blank">XQuartz</a> and install it, and this will restart your computer.</p>
<p><img src="figures/Cairo.png" /></p>
<p>Next, you can install <strong>Cairo</strong> by running the code in Rstudio:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="index.html#cb1-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;Cairo&quot;</span>, <span class="at">type =</span> <span class="st">&quot;source&quot;</span>)</span></code></pre></div>
<p>If the installation is successful, you should be able to library it:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="index.html#cb2-1" tabindex="-1"></a><span class="fu">library</span>(Cairo)</span></code></pre></div>
</div>
<div id="install-tidymass-shinyapp" class="section level2 hasAnchor" number="1.4">
<h2><span class="header-section-number">1.4</span> Install Tidymass shinyapp<a href="index.html#install-tidymass-shinyapp" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>First, you are recommended to install <strong>Tidymass</strong> with the following code. For more information and guidance, please refer to <a href="https://www.tidymass.org/" target="_blank">Tidymass Website</a></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="index.html#cb3-1" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_gitlab</span>(<span class="st">&quot;tidymass/tidymass&quot;</span>)</span></code></pre></div>
<p>Second, install the necessary packages:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="index.html#cb4-1" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&#39;remotes&#39;</span>)) <span class="fu">install.packages</span>(<span class="st">&#39;remotes&#39;</span>);</span>
<span id="cb4-2"><a href="index.html#cb4-2" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&#39;tidyverse&#39;</span>)) <span class="fu">install.packages</span>(<span class="st">&#39;tidyverse&#39;</span>);</span>
<span id="cb4-3"><a href="index.html#cb4-3" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&#39;writexl&#39;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;writexl&quot;</span>);</span>
<span id="cb4-4"><a href="index.html#cb4-4" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&#39;hexbin&#39;</span>)) <span class="fu">install.packages</span>(<span class="st">&#39;hexbin&#39;</span>)</span>
<span id="cb4-5"><a href="index.html#cb4-5" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&#39;ComplexUpset&#39;</span>))<span class="fu">install.packages</span>(<span class="st">&#39;ComplexUpset&#39;</span>);</span>
<span id="cb4-6"><a href="index.html#cb4-6" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&#39;shinyalert&#39;</span>))<span class="fu">install.packages</span>(<span class="st">&#39;shinyalert&#39;</span>);</span>
<span id="cb4-7"><a href="index.html#cb4-7" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&#39;shinyFiles&#39;</span>)) remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&#39;thomasp85/shinyFiles&#39;</span>);</span>
<span id="cb4-8"><a href="index.html#cb4-8" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&#39;shinyWidgets&#39;</span>)) remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;dreamRs/shinyWidgets&quot;</span>);</span>
<span id="cb4-9"><a href="index.html#cb4-9" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&#39;shiny&#39;</span>)) <span class="fu">install.packages</span>(<span class="st">&#39;shiny&#39;</span>);</span>
<span id="cb4-10"><a href="index.html#cb4-10" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&#39;bsicons&#39;</span>)) <span class="fu">install.packages</span>(<span class="st">&#39;bsicons&#39;</span>);</span>
<span id="cb4-11"><a href="index.html#cb4-11" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&#39;bslib&#39;</span>)) <span class="fu">install.packages</span>(<span class="st">&#39;bslib&#39;</span>);</span>
<span id="cb4-12"><a href="index.html#cb4-12" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&#39;plotly&#39;</span>)) <span class="fu">install.packages</span>(<span class="st">&#39;plotly&#39;</span>);</span>
<span id="cb4-13"><a href="index.html#cb4-13" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&#39;colourpicker&#39;</span>)) <span class="fu">install.packages</span>(<span class="st">&#39;colourpicker&#39;</span>);</span>
<span id="cb4-14"><a href="index.html#cb4-14" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&#39;massdbbuildin&#39;</span>)) remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&#39;tidymass/massdbbuildin&#39;</span>) </span>
<span id="cb4-15"><a href="index.html#cb4-15" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&#39;massdatabase&#39;</span>)) remotes<span class="sc">::</span><span class="fu">install_gitlab</span>(<span class="st">&quot;jaspershen/massdatabase&quot;</span>)</span></code></pre></div>
<p>Finally, install Tidymass shinyapp with the code:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="index.html#cb5-1" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&#39;tidymass/tidymass_shiny&#39;</span>)</span></code></pre></div>
<p>To start the Tidymass shinyapp:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="index.html#cb6-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb6-2"><a href="index.html#cb6-2" tabindex="-1"></a><span class="fu">library</span>(tidymass)</span>
<span id="cb6-3"><a href="index.html#cb6-3" tabindex="-1"></a><span class="fu">library</span>(tidymassshiny)</span>
<span id="cb6-4"><a href="index.html#cb6-4" tabindex="-1"></a><span class="fu">run_tidymass_shiny</span>()</span></code></pre></div>
<p>You should be able to see:</p>
<p><img src="figures/shinyapp.png" /></p>
</div>
<div id="install-docker-version" class="section level2 hasAnchor" number="1.5">
<h2><span class="header-section-number">1.5</span> Install docker version<a href="index.html#install-docker-version" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="https://www.docker.com/" target="_blank">Docker</a>, a group of platform as a service (PaaS) products, uses OS-level virtualization to provide software in containers. It’s useful for individuals who want to share the code, data, and analysis environment with others to repeat their analysis and results.</p>
<p>We provide a docker version of tidymass shinyapp, all the packages in tidymass shinyapp and the dependent packages have been installed.</p>
<p><strong>Install docker</strong></p>
<p>You can refer the the <a href="https://www.docker.com/get-started" target="_blank">official website</a> to download the docker. Then run docker.</p>
<p><strong>Pull the tidymassshiny image</strong></p>
<p>Open your terminal (on Windows, use Command Prompt, PowerShell, or Windows Terminal) and type the following command:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="index.html#cb7-1" tabindex="-1"></a>docker pull tidymass<span class="sc">/</span>tidymassshiny<span class="sc">:</span>latest</span></code></pre></div>
<p><strong>Get the path of the demo data</strong></p>
<p>Since the Shiny app utilizes <code>shinyFiles</code> to obtain file or folder paths, you need to mount your <strong>working directory</strong> into the Docker image when running the Docker version of <code>tidymassshiny</code>. Here are instructions.</p>
<p>For macOS systems, you can get the path for the demo data from <code>Get Info</code>, the path may look like <code>/Users/yijiang/Desktop/Demo_data</code>. For Windows OS, the path may look like <code>C:\Users\Yijiang\Documents</code>. Here you need to copy <strong>Your Own Path</strong>.</p>
<p><img src="figures/path.png" /></p>
<p><strong>Ensure Docker Desktop has permission to demo data</strong></p>
<p>Ensure Docker Desktop has permission to access the drive containing your working directory:</p>
<ol style="list-style-type: decimal">
<li>Open <strong>Docker Desktop</strong>.</li>
<li>Go to <strong>Settings &gt; Resources &gt; File Sharing</strong>.</li>
<li>Add the drive or folder (e.g., <code>/Users/yijiang/Desktop/Demo_data</code>) to the shared folders list.</li>
<li>Click <strong>Apply &amp; Restart</strong>.</li>
</ol>
<p><img src="figures/docker_set.png" /></p>
<p>Please make sure the demo file has the required permissions before proceeding to the next steps. Here are some guidance for <a href="https://support.apple.com/en-sg/guide/mac-help/mchlp1203/mac" target="_blank">Mac</a> and <a href="https://answers.microsoft.com/en-us/windows/forum/all/give-permissions-to-files-and-folders-in-windows/78ee562c-a21f-4a32-8691-73aac1415373" target="_blank">Windows</a>.</p>
<p>Here replace <code>/Users/yijiang/Desktop/Demo_data</code> with <strong>your own path</strong> that you just give permission to the Docker Desktop. Then run the code:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="index.html#cb8-1" tabindex="-1"></a>docker run <span class="sc">-</span>p <span class="dv">3838</span><span class="sc">:</span><span class="dv">3838</span> <span class="sc">-</span>v <span class="sc">/</span>Users<span class="sc">/</span>yijiang<span class="sc">/</span>Desktop<span class="sc">/</span>Demo_data<span class="sc">:</span><span class="er">/</span>home tidymass<span class="sc">/</span>tidymassshiny<span class="sc">:</span>latest</span></code></pre></div>
<p>This command achieves two purposes:
- Starts the Docker image.
- Mounts your working directory to the <code>/home</code> path within the container.</p>
<p><strong>Running the Application</strong></p>
<p>In terminal, a series of R package loading information will be printed. Until you see the prompt below, tidymassshiny has been successfully running：</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="index.html#cb9-1" tabindex="-1"></a>R version <span class="dv">4</span>.<span class="fl">3.3</span> (<span class="dv">2024-02-29</span>) <span class="sc">--</span> <span class="st">&quot;Angel Food Cake&quot;</span></span>
<span id="cb9-2"><a href="index.html#cb9-2" tabindex="-1"></a>...</span>
<span id="cb9-3"><a href="index.html#cb9-3" tabindex="-1"></a>...</span>
<span id="cb9-4"><a href="index.html#cb9-4" tabindex="-1"></a>...</span>
<span id="cb9-5"><a href="index.html#cb9-5" tabindex="-1"></a><span class="do">## Until this message show up.</span></span>
<span id="cb9-6"><a href="index.html#cb9-6" tabindex="-1"></a>Listening on http<span class="sc">:</span><span class="er">//</span><span class="dv">0</span>.<span class="dv">0</span>.<span class="fl">0.0</span><span class="sc">:</span><span class="dv">3838</span></span></code></pre></div>
<p>Then open the browser (Google，Firefox，Edge or Safari), paste the address <code>http://localhost:3838</code> in the address bar, and the web page can jump to the tidymass shinyapp page.</p>
<p>Enjoy your metabolomic data analysis process!</p>
<p><img src="figures/docker.png" /></p>
<p><img src="figures/docker_target.png" /></p>
</div>
<div id="install-server-version" class="section level2 hasAnchor" number="1.6">
<h2><span class="header-section-number">1.6</span> Install server version<a href="index.html#install-server-version" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To better handle large-scale metabolite data analysis, tidymass_shiny can be deployed on high-performance servers.</p>
<p>This guide walks you through deploying tidymass_shiny on <code>Ubuntu 20.04 LTS</code> server</p>
<p><strong>Step 1: Install Required System Libraries</strong></p>
<p>Ensure the system has the necessary libraries for R package compilation and Shiny functionality. These libraries are critical for graphics, networking, and data processing.</p>
<p>-<strong>Update package lists</strong>:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="index.html#cb10-1" tabindex="-1"></a>sudo apt update</span></code></pre></div>
<p>-<strong>Install the libraries</strong>:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="index.html#cb11-1" tabindex="-1"></a>sudo apt install <span class="sc">-</span>y gfortran libcurl4<span class="sc">-</span>openssl<span class="sc">-</span>dev libssh2<span class="dv">-1</span><span class="sc">-</span>dev libgit2<span class="sc">-</span>dev libpng<span class="sc">-</span>dev libjpeg<span class="sc">-</span>dev libtiff<span class="sc">-</span>dev libcairo2<span class="sc">-</span>dev libharfbuzz<span class="sc">-</span>dev libfribidi<span class="sc">-</span>dev zlib1g<span class="sc">-</span>dev libbz2<span class="sc">-</span>dev liblzma<span class="sc">-</span>dev libnetcdf<span class="sc">-</span>dev libxml2<span class="sc">-</span>dev libjson<span class="sc">-</span>c<span class="sc">-</span>dev libssl<span class="sc">-</span>dev libfontconfig1<span class="sc">-</span>dev libfreetype6<span class="sc">-</span>dev libicu<span class="sc">-</span>dev libhdf5<span class="sc">-</span>dev</span></code></pre></div>
<p><strong>Step 2: Create a Shiny User Account</strong></p>
<p>To isolate the Shiny application and manage permissions effectively, create a dedicated user.</p>
<p>-<strong>Create the <code>shiny</code> user</strong>:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="index.html#cb12-1" tabindex="-1"></a>sudo adduser shiny</span></code></pre></div>
<p>-<strong>Switch to the <code>shiny</code> user</strong>:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="index.html#cb13-1" tabindex="-1"></a>su <span class="sc">-</span> shiny</span></code></pre></div>
<p><strong>Step 3: Install R</strong></p>
<p>Install the latest version of R from the CRAN repository.</p>
<p>-<strong>Add the CRAN repository</strong>:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="index.html#cb14-1" tabindex="-1"></a>sudo apt<span class="sc">-</span>key adv <span class="sc">--</span>keyserver keyserver.ubuntu.com <span class="sc">--</span>recv<span class="sc">-</span>keys E298A3A825C0D65DFD57CBB651716619E084DAB9</span>
<span id="cb14-2"><a href="index.html#cb14-2" tabindex="-1"></a>sudo add<span class="sc">-</span>apt<span class="sc">-</span>repository <span class="st">&#39;deb https://cloud.r-project.org/bin/linux/ubuntu focal-cran40/&#39;</span></span></code></pre></div>
<p>-<strong>Update and install R</strong>:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="index.html#cb15-1" tabindex="-1"></a>sudo apt update</span>
<span id="cb15-2"><a href="index.html#cb15-2" tabindex="-1"></a>sudo apt install <span class="sc">-</span>y r<span class="sc">-</span>base r<span class="sc">-</span>base<span class="sc">-</span>dev</span></code></pre></div>
<p><strong>Step 4: Install Shiny Server</strong></p>
<p>Shiny Server hosts and serves your Shiny application.</p>
<p>-<strong>Install <code>gdebi</code> to handle <code>.deb</code> files</strong>:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="index.html#cb16-1" tabindex="-1"></a>sudo apt install <span class="sc">-</span>y gdebi<span class="sc">-</span>core</span></code></pre></div>
<p>-<strong>Download and install Shiny Server</strong> (verify the latest version at <a href="https://posit.co/download/shiny-server/" target="_blank">Shiny Server’s official site</a>):</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="index.html#cb17-1" tabindex="-1"></a>wget https<span class="sc">:</span><span class="er">//</span>download3.rstudio.org<span class="sc">/</span>ubuntu<span class="fl">-18.04</span><span class="sc">/</span>x86_64<span class="sc">/</span>shiny<span class="sc">-</span>server<span class="dv">-1</span>.<span class="dv">5</span>.<span class="fl">17.973</span><span class="sc">-</span>amd64.deb</span>
<span id="cb17-2"><a href="index.html#cb17-2" tabindex="-1"></a>sudo gdebi shiny<span class="sc">-</span>server<span class="dv">-1</span>.<span class="dv">5</span>.<span class="fl">17.973</span><span class="sc">-</span>amd64.deb</span></code></pre></div>
<p>-<strong>Start and enable Shiny Server</strong>:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="index.html#cb18-1" tabindex="-1"></a>sudo systemctl start shiny<span class="sc">-</span>server</span>
<span id="cb18-2"><a href="index.html#cb18-2" tabindex="-1"></a>sudo systemctl enable shiny<span class="sc">-</span>server</span></code></pre></div>
<p><strong>Step 5: Set Up the Shiny Application Directory</strong></p>
<p>Create a directory to store your Shiny application.</p>
<p>-<strong>Create the directory</strong> :</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="index.html#cb19-1" tabindex="-1"></a>sudo mkdir <span class="sc">/</span>srv<span class="sc">/</span>shiny<span class="sc">-</span>server<span class="sc">/</span>tidymass_shiny</span></code></pre></div>
<p>-<strong>Set ownership to the <code>shiny</code> user</strong>:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="index.html#cb20-1" tabindex="-1"></a>sudo chown <span class="sc">-</span>R shiny<span class="sc">:</span>shiny <span class="sc">/</span>srv<span class="sc">/</span>shiny<span class="sc">-</span>server<span class="sc">/</span>tidymass_shiny</span></code></pre></div>
<p><strong>Step 6: Install Required R Packages</strong></p>
<p>Install the R packages needed for your Shiny application.</p>
<p>-<strong>Start R</strong>:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="index.html#cb21-1" tabindex="-1"></a>R</span></code></pre></div>
<p><strong>For Chinese users</strong>:</p>
<p>-<strong>Set package mirrors</strong> (optional, for faster downloads):</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="index.html#cb22-1" tabindex="-1"></a><span class="fu">options</span>(<span class="at">repos =</span> <span class="fu">c</span>(<span class="at">CRAN =</span> <span class="st">&#39;https://mirrors.tuna.tsinghua.edu.cn/CRAN/&#39;</span>))</span>
<span id="cb22-2"><a href="index.html#cb22-2" tabindex="-1"></a><span class="fu">options</span>(<span class="at">BioC_mirror =</span> <span class="st">&#39;https://mirrors.westlake.edu.cn/bioconductor&#39;</span>)</span></code></pre></div>
<p>-<strong>Install essential packages</strong></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="index.html#cb23-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">&#39;tidyverse&#39;</span>, <span class="st">&#39;writexl&#39;</span>, <span class="st">&#39;hexbin&#39;</span>, <span class="st">&#39;ComplexUpset&#39;</span>, <span class="st">&#39;shinyalert&#39;</span>, <span class="st">&#39;shiny&#39;</span>, <span class="st">&#39;bsicons&#39;</span>, <span class="st">&#39;bslib&#39;</span>, <span class="st">&#39;plotly&#39;</span>, <span class="st">&#39;colourpicker&#39;</span>,<span class="st">&#39;BiocManager&#39;</span>，<span class="st">&#39;devtools&#39;</span>)</span>
<span id="cb23-2"><a href="index.html#cb23-2" tabindex="-1"></a>BiocManager<span class="sc">::</span><span class="fu">install</span>(<span class="fu">c</span>(<span class="st">&#39;preprocessCore&#39;</span>,<span class="st">&#39;impute&#39;</span>,<span class="st">&#39;mzR&#39;</span>,<span class="st">&#39;MSnbase&#39;</span>,<span class="st">&#39;Rdisop&#39;</span>,<span class="st">&#39;BiocGenerics&#39;</span>,<span class="st">&#39;KEGGREST&#39;</span>,<span class="st">&#39;DelayedArray&#39;</span>,<span class="st">&#39;S4Arrays&#39;</span>,<span class="st">&#39;GenomicRanges&#39;</span>,<span class="st">&#39;multtest&#39;</span>,<span class="st">&#39;MassSpecWavelet&#39;</span>,<span class="st">&#39;xcms&#39;</span>,<span class="st">&#39;Biobase&#39;</span>,<span class="st">&#39;AnnotationFilter&#39;</span>))</span>
<span id="cb23-3"><a href="index.html#cb23-3" tabindex="-1"></a></span>
<span id="cb23-4"><a href="index.html#cb23-4" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_gitlab</span>(<span class="st">&#39;tidymass/masstools&#39;</span>) devtools<span class="sc">::</span><span class="fu">install_gitlab</span>(<span class="st">&#39;tidymass/massqc&#39;</span>) devtools<span class="sc">::</span><span class="fu">install_gitlab</span>(<span class="st">&#39;tidymass/massdataset&#39;</span>) devtools<span class="sc">::</span><span class="fu">install_gitlab</span>(<span class="st">&#39;tidymass/metid&#39;</span>) devtools<span class="sc">::</span><span class="fu">install_gitlab</span>(<span class="st">&#39;tidymass/metpath&#39;</span>) devtools<span class="sc">::</span><span class="fu">install_gitlab</span>(<span class="st">&#39;tidymass/massstat&#39;</span>) devtools<span class="sc">::</span><span class="fu">install_gitlab</span>(<span class="st">&#39;tidymass/massprocesser&#39;</span>) devtools<span class="sc">::</span><span class="fu">install_gitlab</span>(<span class="st">&#39;tidymass/massdatabase&#39;</span>) devtools<span class="sc">::</span><span class="fu">install_gitlab</span>(<span class="st">&#39;tidymass/tidymass&#39;</span>) devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&#39;thomasp85/shinyFiles&#39;</span>) devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&#39;dreamRs/shinyWidgets&#39;</span>) devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&#39;tidymass/massdbbuildin&#39;</span>) devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&#39;tidymass/tidymass_shiny&#39;</span>)</span></code></pre></div>
<p><strong>Step 7: Deploy the Shiny Application</strong></p>
<p>Add your Shiny app code to the directory.</p>
<p>-<strong>Create <code>app.R</code></strong>:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="index.html#cb24-1" tabindex="-1"></a>sudo nano <span class="sc">/</span>srv<span class="sc">/</span>shiny<span class="sc">-</span>server<span class="sc">/</span>my_shiny_app<span class="sc">/</span>app.R</span></code></pre></div>
<p>-<strong>Add your app code</strong> (example):</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="index.html#cb25-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb25-2"><a href="index.html#cb25-2" tabindex="-1"></a><span class="fu">library</span>(tidymass)</span>
<span id="cb25-3"><a href="index.html#cb25-3" tabindex="-1"></a><span class="fu">library</span>(tidymassshiny)</span>
<span id="cb25-4"><a href="index.html#cb25-4" tabindex="-1"></a><span class="fu">run_tidymass_shiny</span>()</span></code></pre></div>
<p>-<strong>Save and exit</strong> (<code>Ctrl + O</code>, <code>Enter</code>, <code>Ctrl + X</code> in nano).</p>
<p><strong>Step 8: Restart Shiny Server and Test</strong></p>
<p>Restart the server and verify your application works.</p>
<p>-<strong>Restart Shiny Server</strong>:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="index.html#cb26-1" tabindex="-1"></a>sudo systemctl restart shiny<span class="sc">-</span>server</span></code></pre></div>
<p>-<strong>Test the app</strong>:</p>
<p>Open a browser and go to <code>http://your-server-ip:3838/tidymass_shiny</code>.</p>
<p><img src="figures/b1.png" /></p>
<p><strong>Notice</strong></p>
<p>It is important to note that <code>tidymass_shiny</code> utilizes the <code>shinyFiles</code> package, which is inherently a local file management system. Theoretically, <code>shinyFiles</code> cannot directly access local files. You need to set the raw data directory and raw data under <strong>“/home/shiny”</strong>.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>

<a href="upstream-data-processing.html" class="navigation navigation-next navigation-unique" aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": "https://github.com/USERNAME/REPO/edit/BRANCH/index.Rmd",
    "text": "Edit"
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["_main.pdf", "_main.epub"],
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "subsection"
  }
});
});
</script>

</body>

</html>
